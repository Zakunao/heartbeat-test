<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="Wr~:Len@Q63v!i`#NtPh">signalValue</variable><variable id="{wt%F#Z(XKGd^~X`_@D!">gateThreshold</variable><variable id="W8*{Sl#P01G8L,Ew6v%K">gateOpen</variable><variable id="(b|4#-4^is#XOQ_dE[F2">heartbeats</variable><variable id="x[3plk]-x$[.|!LRivww">elapsedSeconds</variable><variable id="]/Q=i~A(ch)Jkx+b[kAE">start_time</variable><variable id="~KwgApVOj_QuEW-+*J2X">bpm</variable></variables><block type="pxt-on-start" id="w7{b#*F(Bh=~0yyib|6!" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="q^=X2-M.!unZBWdl[VMH"><field name="VAR" id="]/Q=i~A(ch)Jkx+b[kAE">start_time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="#MGw(r!B-$SZc2TESJ$N"></block></value><next><block type="variables_set" id="W#ykgl(ejRjI8rl,T%Tx"><field name="VAR" id="{wt%F#Z(XKGd^~X`_@D!">gateThreshold</field><value name="VALUE"><shadow type="math_number" id="_0.|xrU6%#)dv4=S@oDG"><field name="NUM">500</field></shadow></value></block></next></block></statement></block><block type="device_forever" id="J/|e-RLo5@,CnF,*u/*P" x="448" y="0"><statement name="HANDLER"><block type="variables_set" id="!HqHURZkkItM8{{`P7gX"><field name="VAR" id="Wr~:Len@Q63v!i`#NtPh">signalValue</field><comment pinned="false" h="80" w="160">Read the analog value from pin 2</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="!SX[9)3t2cE$X6`;KnwF"><field name="name">AnalogPin.P2</field></block></value><next><block type="controls_if" id="CD3uu4p[UQe[neR6OYve"><mutation elseif="1"></mutation><comment pinned="false" h="80" w="160">Check if the signal value exceeds the gate threshold</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="Y%`^`VX$DmzXfr[Ao#!8"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="!YlJu@jBBNzwb$rOv(})"><field name="OP">GT</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="*w4u*_wv1Cp7t$(vGS;s"><field name="VAR" id="Wr~:Len@Q63v!i`#NtPh">signalValue</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="aWp9?hvolt=g0)~[`P5_"><field name="VAR" id="{wt%F#Z(XKGd^~X`_@D!">gateThreshold</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="8}Y|qu#UZ?8r}z1z%e:k"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id=";WC#$1L4*z;[P^zhgdfd"><field name="VAR" id="W8*{Sl#P01G8L,Ew6v%K">gateOpen</field></block></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="Ds)QVL^c;f/sLJP`H`tW"><field name="VAR" id="W8*{Sl#P01G8L,Ew6v%K">gateOpen</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="[D{RhI;9P?^SPoy?CiIn"><field name="BOOL">TRUE</field></block></value><next><block type="variables_change" id="h+5ERUqOqfwcr5aRe#TQ"><field name="VAR" id="(b|4#-4^is#XOQ_dE[F2">heartbeats</field><value name="VALUE"><shadow type="math_number" id="oMAbgQl}BWWi:/|ys_[7"><field name="NUM">1</field></shadow></value><next><block type="device_play_note" id="3[6m~D}#w^|lbgrxV[gC"><comment pinned="false" h="80" w="160">Play a middle C tone</comment><value name="note"><shadow type="device_note" id="D:R~r8e%pMu!p}G:,On1"><field name="name">262</field></shadow></value><value name="duration"><shadow type="device_beat" id="*9Y}:p1XO3PiqZhR2tf0"><field name="fraction">BeatFraction.Whole</field></shadow></value><next><block type="basic_show_icon" id="BpJmF~JD38C;2Ae^TnN-"><field name="i">IconNames.Heart</field><next><block type="device_set_brightness" id=":$}#G_-yxoZc)=:ojK/]"><value name="value"><shadow type="math_number_minmax" id="E*N%IBn=N;[GZ#36R1)i"><mutation min="0" max="255" label="Number" precision="0"></mutation><field name="SLIDER">125</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><value name="IF1"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="a$@[!x{]+-yPR#rv1+f+"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="4AhGbJK^hARt].,a%dzX"><field name="OP">LTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="Bi#.]yhZamR1gMq+r{jD"><field name="VAR" id="Wr~:Len@Q63v!i`#NtPh">signalValue</field></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="!q6fGgUsH84iP7IY!.pQ"><field name="VAR" id="{wt%F#Z(XKGd^~X`_@D!">gateThreshold</field></block></value></block></value><value name="B"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="^8sO;C6{sg(IeaufV3zX"><field name="VAR" id="W8*{Sl#P01G8L,Ew6v%K">gateOpen</field></block></value></block></value><statement name="DO1"><block type="variables_set" id="LKnHyG7jf2K?Mm?6*vy:"><field name="VAR" id="W8*{Sl#P01G8L,Ew6v%K">gateOpen</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="ye5K2CmKrfw|bdfaBEtE"><field name="BOOL">FALSE</field></block></value><next><block type="music_stop_all_sounds" id="wkraXv%RJMAhEk{y^:yN"><next><block type="device_set_brightness" id=")z%_(.3+.RN|OE^2thiZ"><value name="value"><shadow type="math_number_minmax" id=";yhPeDV*JlZhXH!S:ivP"><mutation min="0" max="255" label="Number" precision="0"></mutation><field name="SLIDER">0</field></shadow></value></block></next></block></next></block></statement><next><block type="variables_set" id="P1y^uUVnR?RN0McgSi?h"><field name="VAR" id="x[3plk]-x$[.|!LRivww">elapsedSeconds</field><comment pinned="false" h="80" w="160">Calculate elapsed time</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="{=Z}zfW7EQKCHJw*!NOQ"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="!]rkO5o/jb`5*@*gGJEz"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="meFf]VgE.UI2yIuP/MM%"></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="bLOp3j.HIBWNScKzf#Pe"><field name="VAR" id="]/Q=i~A(ch)Jkx+b[kAE">start_time</field></block></value></block></value><value name="B"><shadow type="math_number" id="S7`BHwO^2[J8cK#l+xm,"><field name="NUM">1000</field></shadow></value></block></value><next><block type="controls_if" id="D?_DRU|vf5})8AHK9c;_"><comment pinned="false" h="80" w="160">Update BPM every 10 seconds (adjust as needed)</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="LTe$}f[+hD)~TvR);Atx"><field name="OP">GTE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="WH?W{NRJ;^QK4RL0rkZ8"><field name="VAR" id="x[3plk]-x$[.|!LRivww">elapsedSeconds</field></block></value><value name="B"><shadow type="math_number" id=",Rv8X0C!tGdko,?3aj2B"><field name="NUM">10</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="X~.G(P9H9:z8pEboU.ZT"><field name="VAR" id="~KwgApVOj_QuEW-+*J2X">bpm</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_js_round" id="Pwfu9b?4(f-j8J2:#cc$"><field name="OP">round</field><value name="ARG0"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="#`Lq!YhXf(I$r]Zr?9.O"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id=",y{d4T5H{[3fDll5v8ve"><field name="NUM">2</field></shadow></value><value name="B"><shadow type="math_number" id="`RhIT{#yN4?z$/Kl|Ibb"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="[^COHxc1Ok/w1=/~Y/}q"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="T!AZ3~[e6`Z/eUr@9wLo"><field name="VAR" id="(b|4#-4^is#XOQ_dE[F2">heartbeats</field></block></value><value name="B"><shadow type="math_number" id="YC]Vf,^KuAB#oZl]Y+g{"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="aL?/w/R?@T8SwHb]YiK`"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="9}*1;JAZ[A4,GZ}Cg=At"><field name="VAR" id="x[3plk]-x$[.|!LRivww">elapsedSeconds</field></block></value><value name="B"><shadow type="math_number" id="Qt/5OvL|JE3sE[%Y^7~A"><field name="NUM">60</field></shadow></value></block></value></block></value></block></value></block></value><next><block type="serial_writevalue" id="B#NZxa@vv!X6WUa6T/)Q"><value name="name"><shadow type="text" id="]mW@x%MA9Kv%K]t/)~na"><field name="TEXT">BPM</field></shadow></value><value name="value"><shadow type="math_number" id="*P]m4hKlVm|1C|_HeR.8"><field name="NUM">0</field></shadow><block type="variables_get" id="xAxihI[4H!gZxu1!Z7@7"><field name="VAR" id="~KwgApVOj_QuEW-+*J2X">bpm</field></block></value><next><block type="variables_set" id="b^coX4_hA-!m{.)B_V+s"><field name="VAR" id="]/Q=i~A(ch)Jkx+b[kAE">start_time</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="2]cc!D8^F]OQF_D/YguA"></block></value><next><block type="variables_set" id="C?Q8qnk;IJ++BYUwyCEs"><field name="VAR" id="(b|4#-4^is#XOQ_dE[F2">heartbeats</field><value name="VALUE"><shadow type="math_number" id="(1ICmR:Xm(tJC8^I%2:x"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></next></block></next></block></statement></block></xml>